-----------------------------------------------------------------------------
This document is effectively obsolete now the source has been unified. I will
remove it from future versions of FBOHR.
-----------------------------------------------------------------------------

Steps to convert game.exe to FreeBasic:

========== PHASE ONE ==============
Make source files compilable
===================================

game.exe = game.bas, bmod.bas, bmodsubs.bas, menustuf.bas, moresubs.bas,
		   yetmore.bas, yetmore2.bas
New for FB = allmodex.bas

- Allmodex - Replaced library with native allmodex.bas.
- XBLOAD - FreeBasic has a BLOAD but it is not compatible with QB and
		so this function needs to be rewritten. Fortunately this
	   	(in moresubs.bas) wraps all occurences of BLOAD in game.
- globals - inline /comments/ not recognised, remove. (g,s and b)
- globals - FB doesn't seem to allow reuse of keywords as variable names.	
		Change to names$(), and replace in all .bas files.

moresubs.bas:
	pos$ - keyword, rename to jpos$
	ptr - keyword, rename to pt (3 separate areas)
	slot - doesn't allow reuse of slot argument as a loop counter in 
		for...next loops in loadgame. Rename loop counters to sl.
	wtog - global array name can't be implicitly redeclared as a temp int 
		in FB. Rename to wtg.

yetmore.bas:
	readglobalstring - duplicate declaration, remove one.
	GET savh - Um, "error 17: Expected ',', found: ','"! Seems to work 
		fine if #s are added.
			 - Also, doesn't like the function name checksaveslot being 
		used as the last argument, but it will be the wrong size anyway, 
		due to the difference in int sizes, so dim checkslot as short and
		use that, then assign to checksaveslot after the file is closed.
	interruptx - uncomment declaration in allmodex.bi, and change data
		types to regtype.
	PUT savh - similar problem to above. Add #s.

yetmore2.bas:
	readglobalstring - duplicate declare, remove one.
	cathero() - **BUG** undeclared variables, gmap() and scroll(). This
		routine has been moved out of game.bas, where it was a gosub and
		had access to local variables. They need to be passed in, now, or
		made common shared. I have passed them, not sure that is best.

menustuf.bas:
	ptr - very widely used as a variable name. change to pt.
	walk - used as an array and an integer. changed array to walks().
	wtog - used as an integer. changed to wtogl.

bmodsubs.bas:
	inflict() - two parameters called w. renamed the first to ww.
		(note, probably easier to rename the second, the array).
			  - also creates an int called h, which clashes with 
		another parameter. rename to hm (harm). (again probably
		easier to rename h()).
	ptr - again.

bmod.bas:
	ptr - surprise.
	w - used quite a lot as a temp variable, clashes with array. changed
		to "ww" instead.
	targ - similar problem. changed the array to targs in this case.

game.bas:
	getitem - duplicate declares, delete one.
	clear - not the same purpose in FB. not needed? comment out.
	def seg - not needed. comment out. move the bload to the next line.
		also comment out second occurence, although the whole section
		will probably need to be changed for stage 2.
	DATA - statement listing all the keys, each item needs to be quoted.
	ptr - once again.
	didgo - arrays can't be declared on the fly in FB. DIM it first.
		dim didgo(0 to 3) as integer.
	setmem - no longer used. memory is less complex with 32 bits. Just
		do a fre with no parameters.

======== PHASE TWO =========
Get it working
============================

New file: compat.bi

moresubs.bas:
	hrbrowse.tmp - Had to make some changes to the file read loops to prevent
		empty lines being added to the browse lists. Not sure why, I think it
		is just different interaction between input() and eof(). Basically,
		added a check for an empty string "" and ignored it.
	runcsript() - add a temporary short variable to read to (x3) with get #
		so that we read the right size integers.
		
game.bas:
	ohrrpgce.fnt - This has been incorporated into the compiled exe, so there
		is no need to load it at the start (and we also avoid one of the 
		interrupts, as a result).		
	setmapdata - call it (with pass(), pass()) before initial gosub movement, 
		or there will be an error when readmapblock is called with an 
		uninitialised map.
	grammar - not really a serious issue, but I corrected "Who's Status" and
		"Who's Spells" to "Whose..." and also "Equip Who" to "Equip Whom" in
		the usermenu routine.
	zbuf - removed zbuf array from game.bas and gglobals.bi, and put it in 
		yetmore2.bas where it belongs. (Fixed in QB source after I took this		
		version.)
		
yetmore.bas:
	get # - There is another instance of get # which needs to use a temporary
		short to get 16 bits instead of 32.
	put # - Also has two instances where ints are put #, which need the same 
		adjustment.
		
yetmore2.bas:
	zbuf - see game.bas. Declared local to cathero().
	
gglobals.bi:
	zbuf - see game.bas. Removed.
	
bmodsubs.bas:
	recordsize - declare as short, so get # reads the right number of bytes.
		(Currently not declared, therefore integer.)
	
compat.bi:
	str$ - str$ is different in FB in that it doesn't add the leading space
		to positive numbers. FB uses a macro to replace the function with
		xstr$() throughout the rest of the code, and xstr$ fixes the 
		incompatibility.
	interruptx - moved the declaration into here, since QB doesn't need it.	
	